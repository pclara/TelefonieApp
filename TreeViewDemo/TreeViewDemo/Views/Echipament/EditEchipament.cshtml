@{
    ViewBag.Title = "EditEchipament";
}

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.1.47/jquery.form-validator.min.js"></script>

@using (Ajax.BeginForm("Edit", "Echipament", new AjaxOptions() { HttpMethod = "POST" }, new { id = "ajaxForm" }))
  
{
    <br />
   <input type="submit" value="Salveaza" class="buton" id="submit_1" />
   <input type="button" value="Sterge echipament" class="buton" id="stergeechipament" />
    <input type="hidden" value="@ViewBag.numeechip" id="denumire" name="denumire"/>
    <br />
    <div id="error" name="error">
        <ul id="list-error" name="list-error" style="color:red;background-color:#FFD9D9">

        </ul>
    </div>
    <table id="tabel_detalii">
        <tr><td>
            <input type="hidden" value="@ViewBag.id" id="id" name="id" />
            <input type="hidden" value="@ViewBag.numeechip" id="numeechip" name="numeechip" />
            </td>
        </tr>
    </table>
    <script>
        if ('@ViewBag.id' != -1) { //echip care exista
            var atr = '@Html.Raw(ViewBag.atribute)';
            var x = $.parseJSON(atr);

            console.log("json deserializat lung:" + x.length);
            var table = document.getElementById("tabel_detalii");

            var rowCount = table.rows.length;
            var y = 0;
            if ('@ViewBag.numeechip' == 'PABX') {
                //$("#cartela_noua").css({ 'display': 'block' });
                for (i = 0; i < x.length; i++) {
                    if ((x[i].nume_atr == "LIM MAIN" || x[i].nume_atr == "LIM DISTANT") && y == 0) {
                        y++;
                        var row = table.insertRow(rowCount);
                        rowCount++;
                        var cell1 = row.insertCell(0);
                        ok = 0;

                        for (j = 0; j < x.length; j++)
                            if (x[j].nume_atr == "LIM MAIN" && x[j].val_atr == "1") {
                                cell1.innerHTML = "<input type='radio' name='lim' id='limmain' value='limmain'  style='width:15px;'  checked = 'checked' onchange='verifcalim()' />";
                                ok = 1;
                            }
                        if (ok == 0)
                            cell1.innerHTML = "<input type='radio' name='lim' id='limmain' value='limmain'  style='width:15px;'  onchange='verifcalim()' />";

                        cell1.innerHTML += "<label class='labels'  style='width:10px;'>LIM MAIN</label>";
                        var cell1 = row.insertCell(1);
                        ok = 0;
                        for (j = 0; j < x.length; j++)
                            if (x[j].nume_atr == "LIM DISTANT" && x[j].val_atr != "" && x[j].val_atr != null) {

                                cell1.innerHTML = "<input type='radio' name='lim' id='limdist' checked = 'checked' value='limdist' style='width:15px;' onchange='verifcalim()' />";
                                cell1.innerHTML += "<label class='labels'  style='width:10px;'>LIM DISTANT</label>";
                                var cell1 = row.insertCell(2);
                                cell1.innerHTML = "<input class='editors'  style='display:block;' id='limdist-text' name= 'limdist-text' value='" + x[j].val_atr + "'>";
                                ok = 1;
                            }

                        if (ok == 0) {
                            cell1.innerHTML = "<input type='radio' name='lim' id='limdist' value='limdist' style='width:15px;' onchange='verifcalim()' />";
                            cell1.innerHTML += "<label class='labels'  style='width:10px;'>LIM DISTANT</label>";
                            var cell1 = row.insertCell(2);
                            cell1.innerHTML = "<input class='editors'  style='display:none;' id='limdist-text' name= 'limdist-text'>";
                        }
                    }
                    else
                        if (x[i].nume_atr == 'Numar ruta' || x[i].nume_atr == 'Tip Conexiune' || x[i].nume_atr == 'Destinatie' || x[i].nume_atr == 'Poz. echip.' || x[i].nume_atr == 'Tip echip.') {
                            if (x[i].nume_atr != 'Tip Conexiune' && x[i].nume_atr != 'Destinatie' && x[i].nume_atr != 'Poz. echip.' && x[i].nume_atr != 'Tip echip.') {
                                var row = table.insertRow(rowCount);
                                rowCount++;
                                var cell1 = row.insertCell(0);
                                var newSpan = document.createElement('label');
                                newSpan.innerHTML = x[i].nume_atr;
                                newSpan.className = "labels";
                                cell1.appendChild(newSpan);
                                var cell1 = row.insertCell(1);
                                var newSpan = document.createElement('input');
                                newSpan.type = "text";
                                newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                            newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                                newSpan.className = "editors";
                                newSpan.value = x[i].val_atr;
                                cell1.appendChild(newSpan);
                                var cell1 = row.insertCell(2);
                                var newSpan = document.createElement('input');
                                newSpan.type = "text";
                                var index = 0;
                                for (j = 0; j < x.length; j++)
                                    if (x[j].nume_atr == "Numar ruta" && j <= i) {
                                        index++;
                                    }

                                var index1 = 1;
                                var tip_con = "";
                                for (j = 0; j < x.length; j++)
                                    if (x[j].nume_atr == "Tip Conexiune" && index1 == index) {
                                        newSpan.id = '@ViewBag.id' + "_" + x[j].id_atr;
                                    newSpan.name = '@ViewBag.id' + "_" + x[j].id_atr;
                                    newSpan.className = "editors";
                                    newSpan.value = x[j].val_atr;
                                    tip_con = x[j].val_atr;
                                    index1++;
                                }
                                else if (x[j].nume_atr == "Tip Conexiune") {
                                    index1++;
                                }
                            cell1.appendChild(newSpan);

                            
                            var cell1 = row.insertCell(3);
                            cell1.id = "destcell"+rowCount;
                                var newSpan = document.createElement('input');
                                newSpan.type = "text";

                                var index2 = 1;
                                for (j = 0; j < x.length; j++)
                                    if (x[j].nume_atr == "Destinatie" && index2 == index) {
                                        newSpan.id = '@ViewBag.id' + "_" + x[j].id_atr;
                                        newSpan.name = '@ViewBag.id' + "_" + x[j].id_atr;
                                        newSpan.className = "editors";
                                        newSpan.value = x[j].val_atr;
                                        index2++;
                                    }
                                    else if (x[j].nume_atr == "Destinatie") {
                                        index2++;
                                    }
                                //newSpan.setAttribute("readonly", "true");
                                newSpan.className = "editors";
                                cell1.appendChild(newSpan);

                                var cell1 = row.insertCell(4);
                                cell1.id = "pozcell" + rowCount;
                                var newSpan = document.createElement('input');
                                newSpan.type = "text";

                                var index2 = 1;
                                for (j = 0; j < x.length; j++)
                                    if (x[j].nume_atr == "Poz. echip." && index2 == index) {
                                        newSpan.id = '@ViewBag.id' + "_" + x[j].id_atr;
                                        newSpan.name = '@ViewBag.id' + "_" + x[j].id_atr;
                                        newSpan.className = "editors";
                                        newSpan.value = x[j].val_atr;
                                        index2++;
                                    }
                                    else if (x[j].nume_atr == "Poz. echip.") {
                                        index2++;
                                    }
                                newSpan.className = "editors";
                                cell1.appendChild(newSpan);

                                var cell1 = row.insertCell(5);
                                cell1.id = "tipcell" + rowCount;
                                var newSpan = document.createElement('select');

                                var index2 = 1;
                                var selected_tip = 0;
                                for (j = 0; j < x.length; j++)
                                    if (x[j].nume_atr == "Tip echip." && index2 == index) {
                                        newSpan.id = '@ViewBag.id' + "_" + x[j].id_atr;
                                        newSpan.name = '@ViewBag.id' + "_" + x[j].id_atr;

                                        selected_tip = j;
                                        newSpan.className = "editors";
                                        index2++;
                                    }
                                    else if (x[j].nume_atr == "Tip echip.") {
                                        index2++;
                                    }
                                newSpan.className = "editors";
                                var option = document.createElement("option");
                                option.value = '';
                                option.text = '';
                                newSpan.appendChild(option);

                                var option = document.createElement("option");
                                option.value = 'MSED';
                                option.text = 'MSED';
                                newSpan.appendChild(option);
                                var option = document.createElement("option");
                                option.value = 'MC';
                                option.text = 'MC';
                                newSpan.appendChild(option);
                                var option = document.createElement("option");
                                option.value = 'Modem HDSL';
                                option.text = 'Modem HDSL';
                                newSpan.appendChild(option);
                                var option = document.createElement("option");
                                option.value = 'Concentrator';
                                option.text = 'Concentrator';
                                newSpan.appendChild(option);
                                var option = document.createElement("option");
                                option.value = 'Endpoint';
                                option.text = 'Endpoint';
                                newSpan.appendChild(option);
                                var option = document.createElement("option");
                                option.value = 'Modem HDSL public';
                                option.text = 'Modem HDSL public';
                                newSpan.appendChild(option);
                                var option = document.createElement("option");
                                option.value = 'Modem HDSL STS';
                                option.text = 'Modem HDSL STS';
                                newSpan.appendChild(option);
                                cell1.appendChild(newSpan);
                                newSpan.value = x[selected_tip].val_atr;

                                if (tip_con == "IP-SIP" || tip_con == "IP-H323") {
                                    $("#destcell" + rowCount).attr("style", "display:none");
                                    $("#tipcell" + rowCount).attr("style", "display:none");
                                    $("#pozcell" + rowCount).attr("style", "display:none");
                                }
                        }
                    }
                    else
                        if (x[i].nume_atr == 'Versiune') {
                            var row = table.insertRow(rowCount);
                            rowCount++;
                            var cell1 = row.insertCell(0);
                            var newSpan = document.createElement('label');
                            newSpan.innerHTML = x[i].nume_atr;
                            newSpan.className = "labels";
                            cell1.appendChild(newSpan);
                            var cell1 = row.insertCell(1);
                            var newSpan = document.createElement('select');
                            var idsel = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.className = "editors";
                        cell1.appendChild(newSpan);

                        var tip_ales = "";
                        for (k = 0; k < x.length; k++)
                            if (x[k].nume_atr == 'Tip')
                                tip_ales = x[k].val_atr.den_tip;

                        $.ajax({
                            url: '@Url.Content("~/Echipament/GetVersiuni")',
        type: 'POST',
        data: { idver: x[i].val_atr.idver, tip_ales: tip_ales },
        success: function (response) {
            var tipuri = response.split(',');
            var option = document.createElement("option");
            option.value = '';
            option.text = '';

            var selvar = document.getElementById(idsel);
            selvar.appendChild(option);

            for (var j = 0; j < tipuri.length - 1 ; j++) {
                var option = document.createElement("option");
                var valtext = tipuri[j].split(':');
                option.value = valtext[0];
                option.text = valtext[1];
                selvar.appendChild(option);
            }

            $("#" + idsel).val(tipuri[j]);
        }
    });
}
else if (x[i].nume_atr == 'Tip') {
    var row = table.insertRow(rowCount);
    rowCount++;
    var cell1 = row.insertCell(0);
    var newSpan = document.createElement('label');
    newSpan.innerHTML = x[i].nume_atr;
    newSpan.className = "labels";
    cell1.appendChild(newSpan);
    var cell1 = row.insertCell(1);
    var newSpan2 = document.createElement('select');
    var idsel1 = '@ViewBag.id' + "_" + x[i].id_atr;
                           newSpan2.id = '@ViewBag.id' + "_" + x[i].id_atr;
                           newSpan2.name = '@ViewBag.id' + "_" + x[i].id_atr;
                           newSpan2.className = "editors";
                           cell1.appendChild(newSpan2);

                           $.ajax({
                               url: '@Url.Content("~/Echipament/GetTip")',
                               type: 'POST',
                               data: { idsel: x[i].val_atr.idsel },
                               success: function (response) {
                                   var tipuri = response.split(',');
                                   var option2 = document.createElement("option");
                                   option2.value = '';
                                   option2.text = '';

                                   var selvar1 = document.getElementById(idsel1);
                                   selvar1.appendChild(option2);

                                   for (var j = 0; j < tipuri.length - 1 ; j++) {
                                       var option2 = document.createElement("option");
                                       var valtext = tipuri[j].split(':');
                                       option2.value = valtext[0];
                                       option2.text = valtext[1];
                                       selvar1.appendChild(option2);
                                   }
                                   $("#" + idsel1).val(tipuri[j]);
                               }
                           });
                       } else
                           if (x[i].nume_atr == "Abonati analogici" || x[i].nume_atr == "Abonati digitali" ||
                                      x[i].nume_atr == "Abonati IP" || x[i].nume_atr == "Abonati DECT" ||
                                      x[i].nume_atr == "Abonati total") {
                               var row = table.insertRow(rowCount);
                               rowCount++;
                               var cell1 = row.insertCell(0);
                               var newSpan = document.createElement('label');
                               if (x[i].nume_atr == "Abonati total")
                                   newSpan.innerHTML = x[i].nume_atr;
                               else
                                   newSpan.innerHTML = "Abonati";//x[i].nume_atr;
                               newSpan.className = "labels";
                               cell1.appendChild(newSpan);

                               var cell1 = row.insertCell(1);
                               var newSpan = document.createElement('input');
                               newSpan.type = "text";
                               newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr + "1";
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr + "1";
                        newSpan.className = "editors";
                        newSpan.setAttribute("validare", "true");
                        newSpan.value = x[i].val_atr.split(',')[0];
                        cell1.appendChild(newSpan);

                        var newSpan = document.createElement('input');
                        newSpan.type = "hidden";
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr + ":";
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr + ":";
                        newSpan.value = "CSV";
                        cell1.appendChild(newSpan);

                        var cell1 = row.insertCell(2);
                        var newSpan = document.createElement('input');
                        newSpan.type = "text";
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr + "2";
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr + "2";
                        newSpan.className = "editors";
                        newSpan.setAttribute("validare", "true");
                        newSpan.value = x[i].val_atr.split(',')[1];

                        cell1.appendChild(newSpan);
                    }
                    else if (x[i].nume_atr == "Contract") {
                        //
                        var idcontract = '@ViewBag.id' + "_" + x[i].id_atr;
                        var row = table.insertRow(rowCount);
                        rowCount++;
                        var cell1 = row.insertCell(0);
                        var newSpan = document.createElement('label');
                        newSpan.innerHTML = x[i].nume_atr;
                        newSpan.className = "labels";
                        cell1.appendChild(newSpan);

                        var cell1 = row.insertCell(1);
                        var newSpan2 = document.createElement('select');
                        newSpan2.id = '@ViewBag.id' + "_" + x[i].id_atr;
                            newSpan2.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan2.className = "editors";
                        cell1.appendChild(newSpan2);


                        var cell1 = row.insertCell(2);
                        var newSpan = document.createElement('input');
                        newSpan.type = "text";
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr + "-text";
                            newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr + "-text";
                        if (x[i].val_atr != "Altul")
                            newSpan.setAttribute("style", "visibility:hidden");
                        newSpan.className = "editors";
                        cell1.appendChild(newSpan);


                        var option2 = document.createElement("option");
                        option2.value = 'K1';
                        option2.text = 'K1';
                        newSpan2.appendChild(option2);
                        var option2 = document.createElement("option");
                        option2.value = 'K2';
                        option2.text = 'K2';
                        newSpan2.appendChild(option2);
                        var option2 = document.createElement("option");
                        option2.value = 'K3';
                        option2.text = 'K3';
                        newSpan2.appendChild(option2);
                        var option2 = document.createElement("option");
                        option2.value = 'Etapa 4';
                        option2.text = 'Etapa 4';
                        newSpan2.appendChild(option2);
                        var option2 = document.createElement("option");
                        option2.value = 'Schengen 3.1';
                        option2.text = 'Schengen 3.1';
                        newSpan2.appendChild(option2);
                        var option2 = document.createElement("option");
                        option2.value = 'Altul';
                        option2.text = 'Altul';
                        newSpan2.appendChild(option2);


                        if (x[i].val_atr != 'K1' && x[i].val_atr != 'K2' && x[i].val_atr != 'K3' && x[i].val_atr != 'Etapa 4' && x[i].val_atr != 'Schengen 3.1') {
                            $("#" + idcontract + " option[value='Altul']").prop('selected', true);
                            $("#" + idcontract + "-text").css({ 'visibility': 'visible' });
                            $("#" + idcontract + "-text").val(x[i].val_atr);
                        }

                        $("#" + idcontract + " option[value='" + x[i].val_atr + "']").prop('selected', true);

                        $("#" + idcontract).change(function () {
                            if ($("#" + idcontract + " option:selected").val() == "Altul")
                                $("#" + idcontract + "-text").css({ 'visibility': 'visible' });
                            else
                                $("#" + idcontract + "-text").css({ 'visibility': 'hidden' });
                        });
                        //alert(x[i].val_atr);
                    }
                    else
                        if (x[i].nume_atr == "Licenta" && ('@ViewBag.tipCentrala' == "MD" || '@ViewBag.tipCentrala' == "MX-ONE")) {
                            console.log("tip CENTRALA:" + '@ViewBag.tipCentrala');
                            var row = table.insertRow(rowCount);
                            rowCount++;
                            var cell1 = row.insertCell(0);
                            var newSpan = document.createElement('label');
                            newSpan.innerHTML = x[i].nume_atr;
                            newSpan.className = "labels";
                            cell1.appendChild(newSpan);

                            var cell1 = row.insertCell(1);
                            var newSpan = document.createElement('input');
                            newSpan.type = "text";
                            newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr + "_licenta1";
                           newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr + "_licenta1";
                            newSpan.className = "editors";
                            //newSpan.value = x[i].val_atr.substr(0, 2);
                            var licenta1 = '@ViewBag.id' + "_" + x[i].id_atr + "_licenta1";
                           cell1.appendChild(newSpan);

                           var cell1 = row.insertCell(2);
                           var mainDiv = document.getElementById('text_div');
                           var newSpan = document.createElement('input');
                           newSpan.type = "hidden";
                           newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr + "_licenta1:";
                           newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr + "_licenta1:";
                            newSpan.value = "S";
                            cell1.appendChild(newSpan);

                            var newSpan = document.createElement('input');
                            newSpan.type = "text";
                            newSpan.value = "-";
                            newSpan.setAttribute("style", "float:left;width:1%;height:5%;background:transparent;border:none;margin-left:3.5%;margin-right:0;");//readonly:readonly;
                            cell1.appendChild(newSpan);


                            //var cell1 = row.insertCell(3);
                            var newSpan = document.createElement('input');
                            newSpan.type = "text";
                            newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr + "_licenta2";
                           newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr + "_licenta2";
                            newSpan.className = "editors";
                            newSpan.setAttribute("style", "width:80%");
                            //newSpan.value = x[i].val_atr.substr(2);
                            var licenta2 = '@ViewBag.id' + "_" + x[i].id_atr + "_licenta2";
                            cell1.appendChild(newSpan);


                            var newSpan = document.createElement('input');
                            newSpan.type = "hidden";
                            newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr + "_licenta2:";
                           newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr + "_licenta2:";
                            newSpan.value = "S";
                            cell1.appendChild(newSpan);


                            if ('@ViewBag.tipCentrala' == "MD") {
                               $("#" + licenta1).val(x[i].val_atr.substr(0, 2));
                               $("#" + licenta2).val(x[i].val_atr.substr(2));
                               console.log("E MD , SE ADAUGA EVENTURI:");
                               $("#" + licenta2).css({ 'visibility': 'visible' });
                               $("#" + licenta1).keyup(function () {
                                   $("#" + licenta1).val($("#" + licenta1).val().substr(0, 2));
                               });
                               $("#" + licenta2).keyup(function () {
                                   $("#" + licenta2).val($("#" + licenta2).val().substr(0, 4));
                               });

                               $("#" + licenta1).attr('readonly', false);
                           }
                           else if ('@ViewBag.tipCentrala' == "MX-ONE") {
                               $("#" + licenta1).val(x[i].val_atr.substr(0, 2));
                               $("#" + licenta2).val(x[i].val_atr.substr(2));
                               $("#" + licenta2).css({ 'visibility': 'visible' });
                               /*$("#" + licenta1).val('SN');
                               $("#" + licenta1).attr('readonly', true);*/
                           }
                           else {
                               $("#" + licenta1).val(x[i].val_atr);
                               $("#" + licenta2).css({ 'visibility': 'hidden' });
                               $("#" + licenta1).val('');
                               $("#" + licenta1).attr('readonly', false);
                           }
                       }
                       else if (x[i].nume_atr != 'LIM MAIN' && x[i].nume_atr != 'LIM DISTANT') {
                           var row = table.insertRow(rowCount);
                           rowCount++;
                           var cell1 = row.insertCell(0);
                           var newSpan = document.createElement('label');
                           newSpan.innerHTML = x[i].nume_atr;
                           newSpan.className = "labels";
                           cell1.appendChild(newSpan);
                           var cell1 = row.insertCell(1);
                           var newSpan = document.createElement('input');
                           newSpan.type = "text";
                           newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                            newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;

                            newSpan.className = "editors";
                            newSpan.value = x[i].val_atr;
                            cell1.appendChild(newSpan);
                        }
}


                ///////
    var row = table.insertRow(rowCount);
    rowCount++;
    var cell1 = row.insertCell(0);
    cell1.innerHTML = "<input type='button' value='Adauga conexiune' id='addcon' class='buton' onclick='addconexiune()' />";
}
else
    if ('@ViewBag.numeechip' == 'MSED') {
                    $("#cartela_noua").css({ 'display': 'none' });
                    var table = document.getElementById("tabel_detalii");

                    var rowCount = table.rows.length;
                    var row = table.insertRow(rowCount);
                    var cell1 = row.insertCell(0);
                    var newSpan = document.createElement('label');
                    newSpan.className = "labels";
                    newSpan.innerHTML = "IP CES";
                    cell1.appendChild(newSpan);
                    var cell1 = row.insertCell(1);
                    newSpan = document.createElement('input');
                    newSpan.type = "text";
                    for (i = 0; i < x.length; i++)
                        if (x[i].nume_atr == "IP CES") {
                            newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.value = x[i].val_atr;
                    }
                cell1.appendChild(newSpan);

                var cell1 = row.insertCell(2);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Locatie  REMOTE";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(3);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                for (i = 0; i < x.length; i++)
                    if (x[i].nume_atr == "Locatie remote") {
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.value = x[i].val_atr;
                    }
                cell1.appendChild(newSpan);

                var row = table.insertRow(rowCount + 1);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "IP MANAGEMENT";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                for (i = 0; i < x.length; i++)
                    if (x[i].nume_atr == "IP Management") {
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.value = x[i].val_atr;
                    }
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(2);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "IP CES REMOTE";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(3);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                for (i = 0; i < x.length; i++)
                    if (x[i].nume_atr == "IP CES Remote") {
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.value = x[i].val_atr;
                    }
                cell1.appendChild(newSpan);


                var row = table.insertRow(rowCount + 2);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "MASK:";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                for (i = 0; i < x.length; i++)
                    if (x[i].nume_atr == "MASK") {
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.value = x[i].val_atr;
                    }
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(2);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "IP MANAG. REMOTE";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(3);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                for (i = 0; i < x.length; i++)
                    if (x[i].nume_atr == "IP Management Remote") {
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.value = x[i].val_atr;
                    }
                cell1.appendChild(newSpan);


                var row = table.insertRow(rowCount + 3);

                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "GATEWAY:";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                for (i = 0; i < x.length; i++)
                    if (x[i].nume_atr == "GATEWAY") {
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.value = x[i].val_atr;
                    }
                cell1.appendChild(newSpan);
            }
            else
                for (i = 0; i < x.length; i++) {
                    if ('@ViewBag.numeechip' == 'MC' || '@ViewBag.numeechip' == 'Router' || '@ViewBag.numeechip' == 'Switch' || '@ViewBag.numeechip' == 'Concentrator' || '@ViewBag.numeechip' == 'Endpoint') {


                    $("#cartela_noua").css({ 'display': 'none' });
                    if (x[i].nume_atr == "Port") {
                        var row = table.insertRow(rowCount);
                        rowCount++;

                        var cell1 = row.insertCell(0);
                        var newSpan = document.createElement('label');
                        newSpan.className = "labels";

                        var aux = "";
                        switch (i - 2) {
                            case 1:
                                aux = " FO-1,PP1";
                                break;
                            case 2: aux = " FO-2,PP5";
                                break;
                            case 3: aux = " FO-3,PP9";
                                break;
                            case 4: aux = " FO-4,PP13";
                                break;
                            case 5: aux = " FO-5,PP17";
                                break;
                            case 6: aux = " FO-6,PP21";
                                break;
                            case 7: aux = " FO-7,PP25";
                                break;
                            case 8: aux = " FO-8,PP29";
                                break;
                            case 9: aux = " FO-9,PP33";
                                break;
                            case 10: aux = " FO-10,PP37";
                                break;
                        }
                        newSpan.innerHTML = x[i].nume_atr + (i - 2).toString();//aux
                        cell1.appendChild(newSpan);

                        var cell1 = row.insertCell(1);
                        var newSpan = document.createElement('input');
                        newSpan.type = "text";
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.value = x[i].val_atr;
                        newSpan.className = "editors";
                        cell1.appendChild(newSpan);
                    }
                    else {
                        var row = table.insertRow(rowCount);
                        rowCount++;
                        var cell1 = row.insertCell(0);
                        var newSpan = document.createElement('label');
                        newSpan.className = "labels";
                        newSpan.innerHTML = x[i].nume_atr;
                        cell1.appendChild(newSpan);

                        var cell1 = row.insertCell(1);
                        var newSpan = document.createElement('input');
                        newSpan.type = "text";
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr;
                        newSpan.value = x[i].val_atr;
                        newSpan.className = "editors";
                        cell1.appendChild(newSpan);

                        newSpan = document.createElement('input');
                        newSpan.type = "hidden";
                        newSpan.id = '@ViewBag.id' + "_" + x[i].id_atr + ":";
                        newSpan.name = '@ViewBag.id' + "_" + x[i].id_atr + ":";
                        newSpan.value = x[i].tip_val;
                        cell1.appendChild(newSpan);

                    }

                    if ('@ViewBag.numeechip' == 'Concentrator' && i == 0) {
                        var cell1 = row.insertCell(2);
                        cell1.setAttribute("rowspan", "13");
                        var newSpan = document.createElement('img');
                        newSpan.src = '@Url.Content("~/Images/concentrator.png")';
                        cell1.appendChild(newSpan);
                    }

                    if ('@ViewBag.numeechip' == 'Switch' && i == x.length - 1) {
                        var table = document.getElementById("tabel_detalii");
                        var rowCount = table.rows.length;
                        var row1 = table.insertRow(rowCount);
                        rowCount++;
                        var cell1 = row1.insertCell(0);
                        cell1.innerHTML = "<input type='button' class='buton'  id='addport' name='addport' onclick='addportswitch1()' value='Adauga port' />";

                        function addportswitch1() {
                            var tabel = document.getElementById('tabel_detalii');
                            var rowCount = table.rows.length;
                            var row = table.insertRow(rowCount);
                            var cell1 = row.insertCell(0);
                            var newSpan = document.createElement('label');
                            newSpan.className = "labels";
                            numar = rowCount - 5;
                            newSpan.innerHTML = "Port" + numar;
                            cell1.appendChild(newSpan);
                            var cell1 = row.insertCell(1);
                            newSpan = document.createElement('input');
                            newSpan.type = "text";
                            newSpan.id = 'port' + (rowCount - 5).toString();
                            newSpan.name = 'port' + (rowCount - 5).toString();
                            newSpan.className = "editors";
                            cell1.appendChild(newSpan);
                        }
                    }
                }

            }

    var row = table.insertRow(rowCount);
    rowCount++;
    var cell1 = row.insertCell(0);
    var newSpan = document.createElement('input');
    newSpan.type = "hidden";
    newSpan.id = 'siteID';
    newSpan.name = 'siteID';
    newSpan.value = '@ViewBag.siteID';
            row.setAttribute("display", "none");
            cell1.appendChild(newSpan);
        }
        else {  //echip care nu exista
            $("#cartela_noua").css({ 'display': 'none' });
            if ('@ViewBag.numeechip' == 'MC' || '@ViewBag.numeechip' == 'Router' || '@ViewBag.numeechip' == 'Switch' || '@ViewBag.numeechip' == 'Concentrator' || '@ViewBag.numeechip' == 'Endpoint') {
                var table = document.getElementById("tabel_detalii");

                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);

                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "IP:";
                cell1.appendChild(newSpan);

                var cell2 = row.insertCell(1);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "MASK:";
                cell2.appendChild(newSpan);

                var cell3 = row.insertCell(2);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "GATEWAY:";
                newSpan.setAttribute("style", "margin-right:80%;");
                cell3.appendChild(newSpan);

                if ('@ViewBag.numeechip' == 'MC') {
                    var cell3 = row.insertCell(3);
                    var newSpan = document.createElement('label');
                    newSpan.className = "labels";
                    newSpan.innerHTML = "ENDPOINT:";
                    cell3.appendChild(newSpan);
                }

                var row1 = table.insertRow(rowCount + 1);
                var cell1 = row1.insertCell(0);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'IP';
                newSpan.name = 'IP';
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'IP:';
                newSpan.name = 'IP:';
                newSpan.value = 'S';
                cell1.appendChild(newSpan);

                var cell2 = row1.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'MASK';
                newSpan.name = 'MASK';
                newSpan.className = "editors";
                cell2.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'MASK:';
                newSpan.name = 'MASK:';
                newSpan.value = 'S';
                cell2.appendChild(newSpan);


                var cell3 = row1.insertCell(2);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'GATEWAY';
                newSpan.name = 'GATEWAY';
                newSpan.className = "editors";
                newSpan.setAttribute("style", "float:left;");
                cell3.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'GATEWAY:';
                newSpan.name = 'GATEWAY:';
                newSpan.value = 'S';
                cell3.appendChild(newSpan);


                if ('@ViewBag.numeechip' == 'MC') {
                    var cell3 = row1.insertCell(3);
                    newSpan = document.createElement('input');
                    newSpan.type = "text";
                    newSpan.id = 'ENDPOINT';
                    newSpan.name = 'ENDPOINT';
                    newSpan.className = "editors";
                    cell3.appendChild(newSpan);
                    newSpan = document.createElement('input');
                    newSpan.type = "hidden";
                    newSpan.id = 'ENDPOINT:';
                    newSpan.name = 'ENDPOINT:';
                    newSpan.value = 'S';
                    cell3.appendChild(newSpan);
                }


                if ('@ViewBag.numeechip' == 'Switch') {
                    var row1 = table.insertRow(rowCount + 2);
                    var cell1 = row1.insertCell(0);
                    newSpan = document.createElement('label');
                    newSpan.className = "labels";
                    newSpan.innerHTML = "Port1";
                    cell1.appendChild(newSpan);
                    var cell1 = row1.insertCell(1);
                    newSpan = document.createElement('input');
                    newSpan.type = "text";
                    newSpan.id = 'port1';
                    newSpan.name = 'port1';
                    newSpan.className = "editors";
                    cell1.appendChild(newSpan);

                    var cell1 = row1.insertCell(2);
                    cell1.innerHTML = "<input type='button' class='buton'  id='addport' name='addport' onclick='addportswitch()' value='Adauga port' />";
                    /*newSpan.type = "button";
                    newSpan.id = "addport";
                    newSpan.name = "addport";
                    newSpan.innerHTML = "Adauga port";
                    newSpan.onclick = addport();*/

                    function addportswitch() {
                        var tabel = document.getElementById('tabel_detalii');
                        var rowCount = table.rows.length;
                        var row = table.insertRow(rowCount);
                        var cell1 = row.insertCell(0);
                        var newSpan = document.createElement('label');
                        newSpan.className = "labels";
                        newSpan.innerHTML = "Port" + (rowCount - 3).toString();
                        cell1.appendChild(newSpan);
                        var cell1 = row.insertCell(1);
                        newSpan = document.createElement('input');
                        newSpan.type = "text";
                        newSpan.id = 'port' + (rowCount - 3).toString();
                        newSpan.name = 'port' + (rowCount - 3).toString();
                        newSpan.className = "editors";
                        cell1.appendChild(newSpan);
                    }

                }

                if ('@ViewBag.numeechip' == 'Concentrator') {
                    for (k = 1; k <= 10; k++) {
                        if (k == 2) {
                            var cell1 = row1.insertCell(2);
                            cell1.setAttribute("rowspan", "10");
                            var newSpan = document.createElement('img');
                            newSpan.src = '@Url.Content("~/Images/concentrator.png")';
                            cell1.appendChild(newSpan);
                        }
                        var row1 = table.insertRow(rowCount + k + 1);

                        var cell1 = row1.insertCell(0);
                        var newSpan = document.createElement('label');
                        newSpan.className = "labels";

                        var aux = "";
                        switch (k) {
                            case 1:
                                aux = " FO-1,PP1";
                                break;
                            case 2: aux = " FO-2,PP5";
                                break;
                            case 3: aux = " FO-3,PP9";
                                break;
                            case 4: aux = " FO-4,PP13";
                                break;
                            case 5: aux = " FO-5,PP17";
                                break;
                            case 6: aux = " FO-6,PP21";
                                break;
                            case 7: aux = " FO-7,PP25";
                                break;
                            case 8: aux = " FO-8,PP29";
                                break;
                            case 9: aux = " FO-9,PP33";
                                break;
                            case 10: aux = " FO-10,PP37";
                                break;
                        }


                        newSpan.innerHTML = "PORT " + k + ":"; //aux + ":";//
                        cell1.appendChild(newSpan);

                        var cell1 = row1.insertCell(1);
                        newSpan = document.createElement('input');
                        newSpan.type = "text";
                        newSpan.id = 'port' + k;
                        newSpan.name = 'port' + k;
                        newSpan.className = "editors";
                        cell1.appendChild(newSpan);

                        newSpan = document.createElement('input');
                        newSpan.type = "hidden";
                        newSpan.id = 'port' + k + ':';
                        newSpan.name = 'port' + k + ':';
                        newSpan.value = 'S';
                        cell1.appendChild(newSpan);
                    }
                }
                @*
            var row1 = table.insertRow(rowCount + 3);

                if ('@ViewBag.numeechip' == 'Concentratoare') {
                    for (k = 1; k <= 10; k++) {
                        var cell1 = row1.insertCell(k - 1);
                        newSpan = document.createElement('input');
                        newSpan.type = "text";
                        newSpan.id = 'port' + k;
                        newSpan.name = 'port' + k;
                        newSpan.className = "editors";
                        cell1.appendChild(newSpan);
                               
                               newSpan = document.createElement('input');
                               newSpan.type = "hidden";
                               newSpan.id = 'port' + k + ':';
                               newSpan.name = 'port' + k + ':';
                               newSpan.value = 'S';
                               cell1.appendChild(newSpan);
                           }
                       }
                *@
            }
            else if ('@ViewBag.numeechip' == 'MSED') {
                var table = document.getElementById("tabel_detalii");

                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "IP CES";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ipces';
                newSpan.name = 'ipces';
                cell1.appendChild(newSpan);

                var cell1 = row.insertCell(2);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Locatie  REMOTE";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(3);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'locatieremote';
                newSpan.name = 'locatieremote';
                cell1.appendChild(newSpan);

                var row = table.insertRow(rowCount + 1);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "IP MANAGEMENT";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ipmanagement';
                newSpan.name = 'ipmanagement';
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(2);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "IP CES REMOTE";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(3);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ipcesremote';
                newSpan.name = 'ipcesremote';
                cell1.appendChild(newSpan);


                var row = table.insertRow(rowCount + 2);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "MASK:";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'mask';
                newSpan.name = 'mask';
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(2);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "IP MANAG. REMOTE";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(3);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ipmanagementremote';
                newSpan.name = 'ipmanagementremote';
                cell1.appendChild(newSpan);


                var row = table.insertRow(rowCount + 3);

                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "GATEWAY:";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'gateway';
                newSpan.name = 'gateway';
                cell1.appendChild(newSpan);
            }
            else if ('@ViewBag.numeechip' == 'PABX') {
                var table = document.getElementById("tabel_detalii");

                var rowCount = table.rows.length;

                var row = table.insertRow(rowCount);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Tip";
                cell1.appendChild(newSpan);
                var cell7 = row.insertCell(1);
                $.ajax({
                    url: '@Url.Content("~/Echipament/GetTip")',
                    type: 'POST',
                    success: function (response) {

                        var newSpan7 = document.createElement('select');

                        newSpan7.id = 'tip_val';
                        newSpan7.name = 'tip_val'
                        newSpan7.className = "editors";
                        newSpan7.onchange = function (event, k) {
                            tip_ales = $("#" + this.id + " option:selected").val();
                            $.ajax({
                                url: '@Url.Content("~/Echipament/GetVersiuni")',
                                data: { idver: null, tip_ales: tip_ales },
                                type: 'POST',
                                success: function (response) {
                                    var tipuri = response.split(',');
                                    var option = document.createElement("option");
                                    option.value = '';
                                    option.text = '';
                                    $("#ver_val").empty();
                                    $("#ver_val").append(option);
                                    for (var i = 0; i < tipuri.length; i++) {
                                        var option = document.createElement("option");
                                        var valtext = tipuri[i].split(':');
                                        option.value = valtext[0];
                                        option.text = valtext[1];
                                        $("#ver_val").append(option);
                                    }
                                }
                            });

                            if ($("#tip_val option:selected").text() == "MD") {
                                $("#licenta2").css({ 'visibility': 'visible' });
                                $("#licenta1").keyup(function () {
                                    $("#licenta1").val($("#licenta1").val().substr(0, 2));
                                });
                                $("#licenta2").keyup(function () {
                                    $("#licenta2").val($("#licenta2").val().substr(0, 4));
                                });
                                $("#licenta1").val('');
                                $("#licenta1").attr('readonly', false);
                            }
                            else
                                if ($("#tip_val option:selected").text() == "MX-ONE") {
                                    $("#licenta2").css({ 'visibility': 'visible' });
                                    $("#licenta2").keyup(function () {
                                        $("#licenta2").val($("#licenta2").val().substr(0, 5));
                                    });
                                    $("#licenta1").val('SN');
                                    $("#licenta1").attr('readonly', true);
                                }
                                else {
                                    $("#licenta1").unbind('keyup');
                                    $("#licenta2").unbind('keyup');
                                    $("#licenta2").css({ 'visibility': 'hidden' });
                                    $("#licenta1").val('');
                                    $("#licenta1").attr('readonly', false);
                                }
                        }
                        cell7.appendChild(newSpan7);
                        var tipuri = response.split(',');
                        var option = document.createElement("option");
                        option.value = '';
                        option.text = '';
                        newSpan.appendChild(option);
                        for (var i = 0; i < tipuri.length; i++) {
                            var option = document.createElement("option");
                            var valtext = tipuri[i].split(':');
                            option.value = valtext[0];
                            option.text = valtext[1];
                            newSpan7.appendChild(option);
                        }
                    }
                });
                $("#tip_val").change(function (event, k) {
                    if ($("#tip_val option:selected").text() == "MD") {
                        $("#licenta2").css({ 'visibility': 'visible' });
                        $("#licenta1").keyup(function () {
                            $("#licenta1").val($("#licenta1").val().substr(0, 2));
                        });
                        $("#licenta2").unbind('keyup');
                        $("#licenta2").keyup(function () {
                            $("#licenta2").val($("#licenta2").val().substr(0, 4));
                        });
                        $("#licenta1").val('');
                        $("#licenta1").attr('readonly', false);
                    }
                    else
                        if ($("#tip_val option:selected").text() == "MX-ONE") {
                            $("#licenta2").css({ 'visibility': 'visible' });
                            $("#licenta2").unbind('keyup');
                            $("#licenta2").keyup(function () {
                                $("#licenta2").val($("#licenta2").val().substr(0, 5));
                            });
                            $("#licenta1").val('SN');
                            $("#licenta1").attr('readonly', true);
                        }
                        else {
                            $("#licenta1").unbind('keyup');
                            $("#licenta2").unbind('keyup');
                            $("#licenta2").css({ 'visibility': 'hidden' });
                            $("#licenta1").val('');
                            $("#licenta1").attr('readonly', false);
                        }
                });


                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'tip_val:';
                newSpan.name = 'tip_val:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);

                var row = table.insertRow(rowCount + 1);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "IP";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                var newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ip_val';
                newSpan.name = 'ip_val'
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ip_val:';
                newSpan.name = 'ip_val:';
                newSpan.value = 'S';
                cell1.appendChild(newSpan);

                var row = table.insertRow(rowCount + 2);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Versiune";
                cell1.appendChild(newSpan);


                var cell8 = row.insertCell(1);
                $.ajax({
                    url: '@Url.Content("~/Echipament/GetVersiuni")',
                    data: { idver: null, tip_ales: "1" },
                    type: 'POST',
                    success: function (response) {

                        var newSpan8 = document.createElement('select');

                        newSpan8.id = 'ver_val';
                        newSpan8.name = 'ver_val'
                        newSpan8.className = "editors";
                        cell8.appendChild(newSpan8);
                        var tipuri = response.split(',');
                        var option = document.createElement("option");
                        option.value = '';
                        option.text = '';
                        newSpan8.appendChild(option);
                        for (var i = 0; i < tipuri.length; i++) {
                            var option = document.createElement("option");
                            var valtext = tipuri[i].split(':');
                            option.value = valtext[0];
                            option.text = valtext[1];
                            newSpan8.appendChild(option);
                        }
                    }
                });

                var row = table.insertRow(rowCount + 3);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Contract";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);

                var newSpan = document.createElement('select');
                newSpan.id = 'contract';
                newSpan.name = 'contract'
                newSpan.className = "editors";

                cell1.appendChild(newSpan);
                var option = document.createElement("option");
                option.value = 'K1';
                option.text = 'K1';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'K2';
                option.text = 'K2';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'K3';
                option.text = 'K3';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'Etapa 4';
                option.text = 'Etapa 4';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'Schengen 3.1';
                option.text = 'Schengen 3.1';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'Altul';
                option.text = 'Altul';
                newSpan.appendChild(option);

                var cell1 = row.insertCell(2);
                var newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = "contract-text";
                newSpan.name = "contract-text";
                newSpan.className = "editors";
                newSpan.setAttribute("style", "visibility:hidden");
                cell1.appendChild(newSpan);


                $("#contract").change(function () {
                    if ($("#contract option:selected").val() == "Altul")
                        $("#contract-text").css({ 'visibility': 'visible' });
                    else
                        $("#contract-text").css({ 'visibility': 'hidden' });
                });
                ////
                var row = table.insertRow(rowCount + 4);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Licenta";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                var newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'licenta1';
                newSpan.name = 'licenta1';
                newSpan.value = 'SN';
                newSpan.setAttribute('readonly', 'true');
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(2);
                var mainDiv = document.getElementById('text_div');
                var newSpan11 = document.createElement('input');
                newSpan11.type = "text";
                newSpan11.id = 'licenta2';
                newSpan11.name = 'licenta2';
                newSpan11.setAttribute("style", "width:80%");
                newSpan11.onkeyup = function () {
                    newSpan11.value = newSpan11.value.substr(0, 5);
                }
                newSpan11.className = "editors";
                cell1.appendChild(newSpan11);


                var row = table.insertRow(rowCount + 5);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Abonati";// analogici";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ab_analogici_dela';
                newSpan.name = 'ab_analogici_dela';
                newSpan.className = "editors";
                newSpan.setAttribute("validare", "true");
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ab_analogici_dela:';
                newSpan.name = 'ab_analogici_dela:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(2);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ab_analogici_panala';
                newSpan.name = 'ab_analogici_panala';
                newSpan.setAttribute("validare", "true");
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ab_analogici_panala:';
                newSpan.name = 'ab_analogici_panala:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);


                var row = table.insertRow(rowCount + 6);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Abonati";// digitali";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ab_digitali_dela';
                newSpan.name = 'ab_digitali_dela';
                newSpan.className = "editors";
                newSpan.setAttribute("validare", "true");
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ab_digitali_dela:';
                newSpan.name = 'ab_digitali_dela:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(2);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ab_digitali_panala';
                newSpan.name = 'ab_digitali_panala';
                newSpan.setAttribute("validare", "true");
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ab_digitali_panala:';
                newSpan.name = 'ab_digitali_panala:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);



                var row = table.insertRow(rowCount + 7);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Abonati";// IP";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ab_IP_dela';
                newSpan.name = 'ab_IP_dela';
                newSpan.setAttribute("validare", "true");
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ab_IP_dela:';
                newSpan.name = 'ab_IP_dela:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(2);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ab_IP_panala';
                newSpan.name = 'ab_IP_panala';
                newSpan.setAttribute("validare", "true");
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ab_IP_panala:';
                newSpan.name = 'ab_IP_panala:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);


                var row = table.insertRow(rowCount + 8);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Abonati";// DECT";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ab_DECT_dela';
                newSpan.name = 'ab_DECT_dela';
                newSpan.setAttribute("validare", "true");
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ab_DECT_dela:';
                newSpan.name = 'ab_DECT_dela:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(2);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ab_DECT_panala';
                newSpan.name = 'ab_DECT_panala';
                newSpan.setAttribute("validare", "true");
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ab_DECT_panala:';
                newSpan.name = 'ab_DECT_panala:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);

                var row = table.insertRow(rowCount + 9);
                var cell1 = row.insertCell(0);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Plaja alocata totala";
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ab_total_dela';
                newSpan.setAttribute("validare", "true");
                newSpan.name = 'ab_total_dela';
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ab_total_dela:';
                newSpan.name = 'ab_total_dela:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(2);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'ab_total_panala';
                newSpan.name = 'ab_total_panala';
                newSpan.setAttribute("validare", "true");
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'ab_total_panala:';
                newSpan.name = 'ab_total_panala:';
                newSpan.value = 'I';
                cell1.appendChild(newSpan);

                var row = table.insertRow(rowCount + 10);
                var cell1 = row.insertCell(0);
                /*
                                       tabel = document.createElement('table');
                                       tabel.setAttribute("style", "width:15%;margin-top:10%;");
                                       cell1.appendChild(tabel);
                                       iRowCount = 0;
                                       var row = tabel.insertRow(iRowCount);
                                       row.setAttribute("style", "width:20px;");
                                       iRowCount++;
                                       var cell0 = row.insertCell(0);
                                       cell0.setAttribute("style", "width:10px;");
                                       var cell5 = row.insertCell(1);
                                       cell5.setAttribute("style", "width:10px;");

                                       var cell2 = row.insertCell(2);
                                       cell2.setAttribute("style", "width:10px;");
                                       var cell3 = row.insertCell(3);
                                       cell3.setAttribute("style", "width:10px;");
                                       var cell4 = row.insertCell(4);
                                       cell4.setAttribute("style", "width:10px;");
                                       */
                cell1.innerHTML = "<input type='radio' name='lim' id='limmain' value='limmain' checked='checked'  style='width:15px;'  onchange='verifcalim()' />";
                cell1.innerHTML += "<label class='labels'  style='width:10px;'>LIM MAIN</label>";
                var cell1 = row.insertCell(1);
                cell1.innerHTML = "<input type='radio' name='lim' id='limdist' value='limdist' style='width:15px;' onchange='verifcalim()' />";
                cell1.innerHTML += "<label class='labels'  style='width:10px;'>LIM DISTANT</label>";
                var cell1 = row.insertCell(2);
                cell1.innerHTML = "<input class='editors'  style='display:none;' id='limdist-text' name= 'limdist-text'>";


                var row = table.insertRow(rowCount + 11);
                var cell1 = row.insertCell(0);
                /*var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Conexiune:";
                cell1.appendChild(newSpan);*/

                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Nr. ruta";
                newSpan.setAttribute("style", "width:20%;");
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'nrruta';
                newSpan.name = 'nrruta';
                newSpan.setAttribute("style", "width:70%;margin-left:2%;");
                newSpan.className = "editors";
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'nrruta:';
                newSpan.name = 'nrruta:';
                newSpan.value = 'S';
                cell1.appendChild(newSpan);
                var cell1 = row.insertCell(1);
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Tip";
                newSpan.setAttribute("style", "width:20%;");
                cell1.appendChild(newSpan);
                newSpan = document.createElement('select');
                newSpan.setAttribute("style", "width:70%;margin-left:2%;");
                newSpan.setAttribute("name", "tipconexiune");
                newSpan.setAttribute("id", "tipconexiune");
                newSpan.className = "editors";
                newSpan.onchange = function () {
                    if ($("#tipconexiune").val() == "IP-SIP" || $("#tipconexiune").val() == "IP-H323") {
                        $("#destcell").attr("style","display:none");
                        $("#pozcell").attr("style", "display:none");
                        $("#tipcell").attr("style", "display:none");
                    }
                    else {
                        $("#destcell").attr("style","display:compact");
                        $("#pozcell").attr("style", "display:compact");
                        $("#tipcell").attr("style", "display:compact");
                    }
                }
                cell1.appendChild(newSpan);

                var option = document.createElement("option");
                option.value = '';
                option.text = '';
                newSpan.appendChild(option);

                var option = document.createElement("option");
                option.value = 'IP-SIP';
                option.text = 'IP-SIP';
                newSpan.appendChild(option);

                var option = document.createElement("option");
                option.value = 'IP-H323';
                option.text = 'IP-H323';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'ISDN-QSIG';
                option.text = 'ISDN-QSIG';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'ISDN-PUBLIC';
                option.text = 'ISDN-PUBLIC';
                newSpan.appendChild(option);

                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'tipconexiune:';
                newSpan.name = 'tipconexiune:';
                newSpan.value = 'S';
                cell1.appendChild(newSpan);


                var cell1 = row.insertCell(2);
                cell1.id = "destcell";
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Destinatie";
                newSpan.setAttribute("style", "width:20%;");
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'destinatie';
                newSpan.name = 'destinatie';
                newSpan.setAttribute("style", "width:70%;margin-left:2%;");
                newSpan.className = "editors";
                cell1.appendChild(newSpan);

                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'destinatie:';
                newSpan.name = 'destinatie:';
                newSpan.value = 'S';
                cell1.appendChild(newSpan);

                var cell1 = row.insertCell(3);
                cell1.id = "pozcell";
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Poz. echip.";
                newSpan.setAttribute("style", "width:20%;");
                cell1.appendChild(newSpan);
                newSpan = document.createElement('input');
                newSpan.type = "text";
                newSpan.id = 'pozitie';
                newSpan.name = 'pozitie';
                newSpan.setAttribute("style", "width:50%;margin-left:2%;");
                newSpan.className = "editors";
                cell1.appendChild(newSpan);

                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'pozitie:';
                newSpan.name = 'pozitie:';
                newSpan.value = 'S';
                cell1.appendChild(newSpan);


                var cell1 = row.insertCell(4);
                cell1.id = "tipcell";
                var newSpan = document.createElement('label');
                newSpan.className = "labels";
                newSpan.innerHTML = "Tip echip.";
                newSpan.setAttribute("style", "width:20%;");
                cell1.appendChild(newSpan);
                newSpan = document.createElement('select');
                newSpan.id = 'tiptransport';
                newSpan.name = 'tiptransport';
                newSpan.setAttribute("style", "width:50%;margin-left:2%;");
                newSpan.className = "editors";
                var option = document.createElement("option");
                option.value = '';
                option.text = '';
                newSpan.appendChild(option);

                var option = document.createElement("option");
                option.value = 'MSED';
                option.text = 'MSED';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'MC';
                option.text = 'MC';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'Modem HDSL';
                option.text = 'Modem HDSL';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'Concentrator';
                option.text = 'Concentrator';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'Endpoint';
                option.text = 'Endpoint';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'Modem HDSL public';
                option.text = 'Modem HDSL public';
                newSpan.appendChild(option);
                var option = document.createElement("option");
                option.value = 'Modem HDSL STS';
                option.text = 'Modem HDSL STS';
                newSpan.appendChild(option);
                cell1.appendChild(newSpan);


                newSpan = document.createElement('input');
                newSpan.type = "hidden";
                newSpan.id = 'tiptransport:';
                newSpan.name = 'tiptransport:';
                newSpan.value = 'S';
                cell1.appendChild(newSpan);

                var row = table.insertRow(rowCount + 12);
                var cell1 = row.insertCell(0);
                cell1.innerHTML = "<input type='button' value='Adauga conexiune' id ='addcon' class='buton' onclick='addconexiune()' />";

            }
    var tabel = document.getElementById('tabel_detalii');
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);
    var cell1 = row.insertCell(0);
    newSpan = document.createElement('input');
    newSpan.type = "hidden";
    newSpan.id = 'tipechipament';
    newSpan.name = 'tipechipament';
    newSpan.value = '@ViewBag.tipechipament';
            cell1.appendChild(newSpan);
            var cell1 = row.insertCell(1);

            var newSpan = document.createElement('input');
            newSpan.type = "hidden";
            newSpan.id = 'siteID';
            newSpan.name = 'siteID';
            newSpan.value = '@ViewBag.siteID';
                   cell1.appendChild(newSpan);
               }

               function addconexiune() {
                   var tabel = document.getElementById('tabel_detalii');
                   var rowCount = table.rows.length;
                   var row = table.insertRow(rowCount);
                   var cell1 = row.insertCell(0);
                   var newSpan = document.createElement('label');
                   newSpan.className = "labels";
                   newSpan.innerHTML = "Nr. ruta";
                   newSpan.setAttribute("style", "width:20%;");
                   cell1.appendChild(newSpan);
                   newSpan = document.createElement('input');
                   newSpan.type = "text";
                   newSpan.id = 'nrrutanou' + rowCount;
                   newSpan.name = 'nrrutanou' + rowCount;
                   newSpan.setAttribute("style", "width:70%;margin-left:2%;");
                   newSpan.className = "editors";
                   cell1.appendChild(newSpan);
                   newSpan = document.createElement('input');
                   newSpan.type = "hidden";
                   newSpan.id = 'nrrutanou' + rowCount + ':';
                   newSpan.name = 'nrrutanou' + rowCount + ':';
                   newSpan.value = 'S';
                   cell1.appendChild(newSpan);
                   var cell1 = row.insertCell(1);
                   var newSpan = document.createElement('label');
                   newSpan.className = "labels";
                   newSpan.innerHTML = "Tip";
                   newSpan.setAttribute("style", "width:20%;");
                   cell1.appendChild(newSpan);
                   newSpan = document.createElement('select');
                   newSpan.setAttribute("style", "width:70%;margin-left:2%;");
                   newSpan.setAttribute("name", "tipcnou" + rowCount);
                   newSpan.setAttribute("id", "tipcnou" + rowCount);
                   newSpan.className = "editors";
                   newSpan.onchange = function () {
                       if ($("#tipcnou" + rowCount).val() == "IP-SIP" || $("#tipcnou" + rowCount).val() == "IP-H323") {
                           $("#destcell"+rowCount).attr("style", "display:none");
                           $("#pozcell" + rowCount).attr("style", "display:none");
                           $("#tipcell" + rowCount).attr("style", "display:none");
                       }
                       else {
                           $("#destcell" + rowCount).attr("style", "display:compact");
                           $("#pozcell" + rowCount).attr("style", "display:compact");
                           $("#tipcell" + rowCount).attr("style", "display:compact");
                       }
                   }
                   cell1.appendChild(newSpan);

                   var option = document.createElement("option");
                   option.value = '';
                   option.text = '';
                   newSpan.appendChild(option);

                   var option = document.createElement("option");
                   option.value = 'IP-SIP';
                   option.text = 'IP-SIP';
                   newSpan.appendChild(option);

                   var option = document.createElement("option");
                   option.value = 'IP-H323';
                   option.text = 'IP-H323';
                   newSpan.appendChild(option);
                   var option = document.createElement("option");
                   option.value = 'ISDN-QSIG';
                   option.text = 'ISDN-QSIG';
                   newSpan.appendChild(option);
                   var option = document.createElement("option");
                   option.value = 'ISDN-PUBLIC';
                   option.text = 'ISDN-PUBLIC';
                   newSpan.appendChild(option);

                   newSpan = document.createElement('input');
                   newSpan.type = "hidden";
                   newSpan.id = 'tipcnou' + rowCount + ':';
                   newSpan.name = 'tipcnou' + rowCount + ':';
                   newSpan.value = 'S';
                   cell1.appendChild(newSpan);


                   var cell1 = row.insertCell(2);
                   cell1.id = "destcell" + rowCount;
                   var newSpan = document.createElement('label');
                   newSpan.className = "labels";
                   newSpan.innerHTML = "Destinatie";
                   newSpan.setAttribute("style", "width:20%;");
                   cell1.appendChild(newSpan);
                   newSpan = document.createElement('input');
                   newSpan.type = "text";
                   newSpan.id = 'destinatienou' + rowCount;
                   newSpan.name = 'destinatienou' + rowCount;
                   newSpan.setAttribute("style", "width:70%;margin-left:2%;");
                   newSpan.className = "editors";
                   cell1.appendChild(newSpan);

                   newSpan = document.createElement('input');
                   newSpan.type = "hidden";
                   newSpan.id = 'destinatienou' + rowCount + ':';
                   newSpan.name = 'destinatienou' + rowCount + ':';
                   newSpan.value = 'S';
                   cell1.appendChild(newSpan);

                   var cell1 = row.insertCell(3);
                   cell1.id = "pozcell" + rowCount;
                   var newSpan = document.createElement('label');
                   newSpan.className = "labels";
                   newSpan.innerHTML = "Poz. echip.";
                   newSpan.setAttribute("style", "width:20%;");
                   cell1.appendChild(newSpan);
                   newSpan = document.createElement('input');
                   newSpan.type = "text";
                   newSpan.id = 'pozitienou' + rowCount;
                   newSpan.name = 'pozitienou' + rowCount;
                   newSpan.setAttribute("style", "width:50%;margin-left:2%;");
                   newSpan.className = "editors";
                   cell1.appendChild(newSpan);

                   newSpan = document.createElement('input');
                   newSpan.type = "hidden";
                   newSpan.id = 'pozitienou' + rowCount + ':';
                   newSpan.name = 'pozitienou' + rowCount + ':';
                   newSpan.value = 'S';
                   cell1.appendChild(newSpan);


                   var cell1 = row.insertCell(4);
                   cell1.id = "tipcell" + rowCount;
                   var newSpan = document.createElement('label');
                   newSpan.className = "labels";
                   newSpan.innerHTML = "Tip echip.";
                   newSpan.setAttribute("style", "width:20%;");
                   cell1.appendChild(newSpan);
                   newSpan = document.createElement('select');
                   newSpan.id = 'tiptransportnou' + rowCount;
                   newSpan.name = 'tiptransportnou' + rowCount;
                   newSpan.setAttribute("style", "width:50%;margin-left:2%;");
                   newSpan.className = "editors";
                   var option = document.createElement("option");
                   option.value = '';
                   option.text = '';
                   newSpan.appendChild(option);

                   var option = document.createElement("option");
                   option.value = 'MSED';
                   option.text = 'MSED';
                   newSpan.appendChild(option);
                   var option = document.createElement("option");
                   option.value = 'MC';
                   option.text = 'MC';
                   newSpan.appendChild(option);
                   var option = document.createElement("option");
                   option.value = 'Modem HDSL';
                   option.text = 'Modem HDSL';
                   newSpan.appendChild(option);
                   var option = document.createElement("option");
                   option.value = 'Concentrator';
                   option.text = 'Concentrator';
                   newSpan.appendChild(option);
                   var option = document.createElement("option");
                   option.value = 'Endpoint';
                   option.text = 'Endpoint';
                   newSpan.appendChild(option);
                   var option = document.createElement("option");
                   option.value = 'Modem HDSL public';
                   option.text = 'Modem HDSL public';
                   newSpan.appendChild(option);
                   var option = document.createElement("option");
                   option.value = 'Modem HDSL STS';
                   option.text = 'Modem HDSL STS';
                   newSpan.appendChild(option);
                   cell1.appendChild(newSpan);


                   newSpan = document.createElement('input');
                   newSpan.type = "hidden";
                   newSpan.id = 'tiptransportnou' + rowCount + ':';
                   newSpan.name = 'tiptransportnou' + rowCount + ':';
                   newSpan.value = 'S';
                   cell1.appendChild(newSpan);
               }

               $("#addcon").removeClass("editors");
               $("#addport").removeClass("editors");
    </script>
    <style>
        
        #tabel_detalii {
            margin-left:3%;
            margin-top:3%;
            /*border:1px solid;*/
        }
       
        #tabel_detalii td{
         text-align:right;
        }
    </style>
    <br /><br /><br />
  
    <div style="float:right;">
        <script>
            @*if ('@ViewBag.numeechip' == 'PABX' *@

        </script>
        <input type="button" class="buton" id="cartela_noua" name="cartela_noua" value="Adauga cartela" style="display:none"/>

        <!--input type="button" class="buton" id="atr_nou" name="atr_nou" value="Adauga atribut" onclick="addatribut()"/>
        <br />
        <div id="atribut_nou_div" style="display:none">
            <label class="labels">Tip:</label>

            <select class="editors" id="tip_nou" name="tip_nou">
                <option value="IP">IP</option>
                <option value="Conexiune">Conexiune</option>
                @*
                <option value="Abonati analogici">Abonati analogici</option>
                <option value="Abonati digitali">Abonati digitali</option>
                <option value="Abonati IP">Abonati IP</option>
                <option value="Abonati DECT">Abonati DECT</option>
                <option value="Abonati total">Plaja alocata totala</option>*@
            </select>
            
            <div id="atribut_nou_val">
            <label class="labels">Valoare:</label>
            <input type="text" id="val_nou" name="val_nou" />
            </div>

            <div id="ptconexiune" name="ptconexiune" style="display:none" >
                <label class="labels">Nr. ruta:</label>
                <input id="nrrutanou" name="nrrutanou" />
                <label class="labels">Tip:</label>
                <select id="tipcnou" name="tipcnou" >
                    <option value=""></option>
                    <option value="IP-SIP">IP-SIP</option>
                    <option value="IP-H323">IP-H323</option>
                    <option value="ISDN-QSIG">ISDN-QSIG</option>
                    <option value="ISDN-PUBLIC">ISDN-PUBLIC</option>
                </select>
                <label class="labels">Destinatie:</label>
                <input id="destinatienou" name="destinatienou" />
            </div>
            <br />
            <input type="button" value ="Adauga" class="buton" onclick="submit_form()"/>
        </div-->
    </div>
    
    <script>
        $(function () {
            $(document).on('submit', '#ajaxForm', asd);
        });
        $("#addport").removeClass("editors");


        function asd(e) {
            var submit_val = true;
            $("input[validare='true']").each(function () {
                id = this.id;
                if ($("#" + id).val().length > 5) {
                    //alert(id);
                    if ($("#" + id + "1").html() === undefined)
                        $("#list-error").append("<li id='" + id + "1'>Dimensiunea maxima de 5 caractere</li>");
                    else
                        console.log("exista " + id);

                    $("#list-error").css("display", "block");
                    $("#" + id).css({ "background": "#FF8080" });
                    submit_val = false;
                }
                else {
                    $("#" + id + "1").remove();

                    if ($("#list-error li").length == 0)
                        $("#list-error").css("display", "none");

                    $("#" + id).css({ "background": "" });
                }
            });
            if (submit_val == true)
                return true;
            else {
                //alert("FALSE");
                return false;
            }
        }

        function submit_form() {
            return false;
            //$('#ajaxForm').trigger('submit');
        }
        function addatribut() {
            $("#atribut_nou_div").css({ 'display': 'block' });
        }

        $("#tip_nou").change(function (event, data) {
            if ($("#tip_nou option:selected").val() == "Conexiune") {
                $("#ptconexiune").css({ 'display': 'block' });
                $("#atribut_nou_val").css({ 'display': 'none' });
            }
            else {
                $("#ptconexiune").css({ 'display': 'none' });
                $("#atribut_nou_val").css({ 'display': 'block' });
            }
        });

        $(":input").addClass("editors");
        $("#submit_1").removeClass("editors");
        $("#atr_nou").removeClass("editors");
        $("#cartela_noua").removeClass("editors");
        $("#createechip").removeClass("editors");
        $("#create").removeClass("editors");
        $("#stergeechipament").removeClass("editors");
        $("#addcon").removeClass("editors");

        var getDetailsFunction = function () {
            return function (data, textStatus, jqXHR) {
                $("#details").html(data);
            };
        }

        $("#cartela_noua").click(function () {
            $("#treeDemo").find(".jstree-checked").each(function (index) {
                tip_echip = $(this).attr('id').split("_")[0];
                $.get('@Url.Content("~/Cartela/EditCartela")', "id=-1" + "&&parentID=" + tip_echip, getDetailsFunction(), 'html');
            });
        });
    </script>
    <br />
    <div id="footer-form" >
   


            <script>
                function verifcalim() {
                    var lim = $('input:radio[name=lim]:checked').val();
                    if (lim == "limmain") {
                        $("#limdist-text").css({ 'display': 'none' });
                    }
                    else {
                        $("#limdist-text").css({ 'display': 'block' });
                    }
                }

                $("#stergeechipament").click(function () {
                    $("#treeDemo").find(".jstree-checked").each(function () {
                        var id = this.id;
                        $.post('@Url.Content("~/Echipament/StergeEchipament")', "id=" + id, function (response) {
                            var href = document.URL;
                            //var idechipament = href.substr(href.lastIndexOf("/") + 1, href.lastIndexOf("?") - href.lastIndexOf("/") - 1);
                            var href1 = href.substr(0, href.lastIndexOf("Index") + 5);

                            if (href1.length <= 4)
                                href1 = href.substr(0, href.lastIndexOf("Judete") + 6);

                            //window.location = href.replace(idechipament, response);
                            var stringuri = response.split(',');
                            var href2 = href1 + "?name=" + stringuri[0] + "&&id=" + stringuri[1];
                            window.location = href2;
                        }, 'html');
                    });

                });


    </script>

        </div>
}
